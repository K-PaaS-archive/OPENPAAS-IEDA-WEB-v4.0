<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.openpaas.ieda.hbdeploy.web.deploy.cfDeployment.dao.HbCfDeploymentDefaultConfigDAO">

    <resultMap id="hbCfDeploymentDefaultConfig" type="org.openpaas.ieda.hbdeploy.web.deploy.cfDeployment.dao.HbCfDeploymentDefaultConfigVO">
        <id property="id" column="ID" />
        <result property="recid" column="id"/>
        <result property="iaasType" column="IAAS_TYPE"/>
        <result property="defaultConfigName" column="DEFAULT_CONFIG_NAME" />
        <result property="cfDeploymentVersion" column="CF_DEPLOYMENT_VERSION" />
        <result property="domain" column="DOMAIN" />
        <result property="domainOrganization" column="DOMAIN_ORGANIZATION" />
        <result property="cfDbType" column="CF_DB_TYPE" />
        <result property="createUserId" column="CREATE_USER_ID"/>
        <result property="createDate" column="CREATE_DATE" />
        <result property="updateUserId" column="UPDATE_USER_ID"/>
        <result property="updateDate" column="UPDATE_DATE" />
    </resultMap>

    <select id = "selectHbCfDeploymentDefaultConfigInfoList" resultMap="hbCfDeploymentDefaultConfig">
        select 
            id as id
            ,iaas_type as iaas_Type
            ,default_config_name as default_config_name
            ,cf_deployment_version as cf_deployment_version
            ,domain as domain
            ,domain_organization as domain_organization
            ,cf_db_type as cf_db_type
            ,create_user_id as create_user_id
            ,create_date as create_date
            ,update_user_id as update_user_id
            ,update_date as update_date
        from ieda_hb_cfDeployment_default_config
        ORDER BY id;
    </select>

    <insert id="insertHbCfDeploymentDefaultConfigInfo">
        INSERT INTO ieda_hb_cfDeployment_default_config(
             iaas_type
            ,default_config_name
            ,cf_deployment_version
            ,domain
            ,domain_organization
            ,cf_db_type
            ,create_user_id
            ,create_date
            ,update_user_id
            ,update_date
            ) VALUES (
            #{default.iaasType}
            ,#{default.defaultConfigName}
            ,#{default.cfDeploymentVersion}
            ,#{default.domain}
            ,#{default.domainOrganization}
            ,#{default.cfDbType}
            ,#{default.createUserId}
            ,now()
            ,#{default.updateUserId}
            ,now()
            )
    </insert>

    <update id="updateHbCfDeploymentDefaultConfigInfo">
        UPDATE ieda_hb_cfDeployment_default_config set
            iaas_type = #{default.iaasType}
            ,default_config_name = #{default.defaultConfigName}
            ,cf_deployment_version = #{default.cfDeploymentVersion}
            ,domain = #{default.domain}
            ,domain_organization = #{default.domainOrganization}
            ,cf_db_type = #{default.cfDbType}
            ,update_user_id = #{default.updateUserId}
            ,update_date = now()
        WHERE id = #{default.id}
    </update>

    <select id="selectHbCfDeploymentDefaultConfigInfo" resultMap="hbCfDeploymentDefaultConfig">
        select 
            id as id
            ,iaas_type as iaas_type
            ,default_config_name as default_config_name
            ,cf_deployment_version as cf_deployment_version
            ,domain as domain
            ,domain_organization as domain_organization
            ,cf_db_type as cf_db_type
            ,create_user_id as create_user_id
            ,create_date as create_date
            ,update_user_id as update_user_id
            ,update_date as update_date
        from ieda_hb_cfDeployment_default_config
        where id = #{id}
    </select> 

    <delete id = "deleteHbCfDeploymentDefaultConfigInfo">
        delete from 
            ieda_hb_cfDeployment_default_config
        where
            id = #{default.id}
        and
            default_config_name = #{default.defaultConfigName}
    </delete>
    
    <select id = "selectHbCfDeploymentDefaultConfigByName" resultType="int">
        select
            count(*)
        from
            ieda_hb_cfDeployment_default_config
        where
            default_config_name = #{defaultConfigName}
    </select>
</mapper>